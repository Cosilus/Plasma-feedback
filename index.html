<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Plasma Post Feedback</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #0D1117;
      color: #E8E6E3;
      padding: 40px;
      max-width: 800px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #58A6FF;
    }
    textarea {
      width: 100%;
      height: 150px;
      padding: 10px;
      font-size: 16px;
      background-color: #161B22;
      color: #E8E6E3;
      border: 1px solid #30363D;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    button {
      background-color: #238636;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2EA043;
    }
    #feedback {
      margin-top: 30px;
      font-size: 16px;
      line-height: 1.6;
      white-space: pre-line;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    #rewardContainer {
      display: none;
      margin-top: 20px;
      text-align: center;
    }
    #rewardContainer p {
      color: #E8E6E3;
      font-weight: bold;
    }
    #rewardContainer button {
      background-color: #3A6FA8;
      margin-top: 10px;
    }
    #rewardContainer button:hover {
      background-color: #4C82C0;
    }
  </style>
</head>
<body>
  <h1>Plasma Post Feedback</h1>
  <textarea id="userInput" placeholder="Paste your Twitter post here..."></textarea>
  <div style="text-align:center;">
    <button id="analyzeBtn">Analyze Post</button>
  </div>
  <div id="feedback"></div>
  <div id="rewardContainer">
    <p>ðŸŽ‰ Congratulations, you did a good post and are able to access our Plasma faucet to reward your contribution</p>
    <a href="https://plasma-faucet-2-0.onrender.com" target="_blank">
      <button>Faucet</button>
    </a>
  </div>
  <script>
    function randomChoice(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }
    function randomRange(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function generateFeedback(text) {
      const length = text.length;
      const lower = text.toLowerCase();
      const hasPlasma = lower.includes('plasma');
      const hasStablecoin = lower.includes('stablecoin');
      const mentionsCurrentEvents = /inflation|crisis|market|event|conference|crash/i.test(text);
      const hasOpinion = /i think|in my opinion|personally|imo/i.test(lower);
      const hasStats = /%|data|graph|statistics|numbers|figures/i.test(lower);
      const lengthShort = ["Your post is a bit short. Consider expanding to provide more depth."];
      const lengthLong = ["Nice length! Youâ€™ve provided enough content to engage your audience."];
      const relevanceYes = ["Your post is relevant to current events, which boosts visibility."];
      const relevanceNo = ["Try referencing recent events to improve engagement."];
      const qualityBoth = ["Good job including both Plasma and stablecoins â€” thatâ€™s spot on!"];
      const qualityPlasmaOnly = ["Mentioning Plasma is great. Donâ€™t forget stablecoins too!"];
      const qualityStablecoinOnly = ["Talking about stablecoins is good. Add a Plasma mention to boost relevance."];
      const qualityNone = ["Try adding keywords like Plasma or stablecoins to better match our ecosystem."];
      const styleOpinion = ["Sharing your opinion makes the post more authentic."];
      const styleNoOpinion = ["Consider adding your perspective for a more personal touch."];
      let scoreLength = length < 150 ? randomRange(5, 10) : randomRange(15, 20);
      let scoreRelevance = mentionsCurrentEvents ? randomRange(15, 20) : randomRange(5, 10);
      let scoreStyle = hasOpinion ? randomRange(15, 20) : randomRange(5, 10);
      let scoreStats = hasStats ? randomRange(1, 3) : 0;
      let scoreQuality;
      if (hasPlasma && hasStablecoin) scoreQuality = randomRange(15, 20);
      else if (hasPlasma || hasStablecoin) scoreQuality = randomRange(8, 12);
      else scoreQuality = randomRange(3, 7);
      let totalScore = Math.round((scoreLength + scoreRelevance + scoreQuality + scoreStyle + scoreStats) / 5);
      let scFeedback = "\n\nSC Feedback:";
      let scNotes = [];
      if (!hasStablecoin) scNotes.push("Add stablecoin topics for better alignment.");
      if (!mentionsCurrentEvents) scNotes.push("Include recent events to enhance engagement.");
      if (!hasOpinion) scNotes.push("Include your perspective to strengthen the message.");
      if (!hasStats) scNotes.push("Include some statistics to back your ideas.");
      if (length < 150) scNotes.push("More content can make your post stronger.");
      const lengthFeedback = length < 150 ? randomChoice(lengthShort) : randomChoice(lengthLong);
      const relevanceFeedback = mentionsCurrentEvents ? randomChoice(relevanceYes) : randomChoice(relevanceNo);
      let qualityFeedback;
      if (hasPlasma && hasStablecoin) qualityFeedback = randomChoice(qualityBoth);
      else if (hasPlasma) qualityFeedback = randomChoice(qualityPlasmaOnly);
      else if (hasStablecoin) qualityFeedback = randomChoice(qualityStablecoinOnly);
      else qualityFeedback = randomChoice(qualityNone);
      const styleFeedback = hasOpinion ? randomChoice(styleOpinion) : randomChoice(styleNoOpinion);
      const shuffledScNotes = scNotes.sort(() => 0.5 - Math.random());
      const selectedScNotes = shuffledScNotes.slice(0, Math.min(3, shuffledScNotes.length));
      scFeedback += "\n- " + selectedScNotes.join("\n- ");
      const feedback = `${lengthFeedback}\n\n${relevanceFeedback}\n\n${qualityFeedback}\n\n${styleFeedback}${scFeedback}\n\nOverall score: ${totalScore} / 20`;
      return { feedback, score: totalScore };
    }
    function typeEffect(element, text, speed = 30, onComplete = null) {
      element.textContent = "";
      let i = 0;
      element.style.opacity = 1;
      function typing() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          setTimeout(typing, speed);
        } else if (onComplete) {
          onComplete();
        }
      }
      typing();
    }
    document.getElementById('analyzeBtn').addEventListener('click', () => {
      const text = document.getElementById('userInput').value.trim();
      const feedbackEl = document.getElementById('feedback');
      const rewardContainer = document.getElementById('rewardContainer');
      rewardContainer.style.display = "none";
      if (!text) {
        feedbackEl.textContent = "Please write something to analyze.";
        feedbackEl.style.opacity = 1;
        return;
      }
      feedbackEl.style.opacity = 0;
      feedbackEl.textContent = "Generating feedback...";
      setTimeout(() => {
        const { feedback, score } = generateFeedback(text);
        typeEffect(feedbackEl, feedback, 30, () => {
          if (score >= 11) {
            rewardContainer.style.display = "block";
          }
        });
      }, 500);
    });
  </script>
</body>
</html>